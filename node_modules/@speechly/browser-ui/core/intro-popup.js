!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e}function a(t){return 0===Object.keys(t).length}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const p=new Set;function h(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&d(h)}function f(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=w("style");return y(m(t),e),e.sheet}function y(t,e){f(t.head||t,e)}function b(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function S(){return x(" ")}function C(){return x("")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function k(t,e,n){t.classList[n?"add":"remove"](e)}function _(t){const e={};for(const n of t)e[n.name]=n.value;return e}const z=new Map;let N,O=0;function M(t,e,n,o,r,i,s,c=0){const a=16.666/o;let l="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*i(t);l+=100*t+`%{${s(o,1-o)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,p=m(t),{stylesheet:h,rules:f}=z.get(p)||function(t,e){const n={stylesheet:g(e),rules:{}};return z.set(t,n),n}(p,t);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${d} ${o}ms linear ${r}ms 1 both`,O+=1,d}function L(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),O-=r,O||d((()=>{O||(z.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),z.clear())})))}function P(t){N=t}function R(){if(!N)throw new Error("Function called outside component initialization");return N}const D=[],F=[],B=[],I=[],H=Promise.resolve();let V=!1;function j(t){B.push(t)}const q=new Set;let U,X=0;function W(){const t=N;do{for(;X<D.length;){const t=D[X];X++,P(t),K(t.$$)}for(P(null),D.length=0,X=0;F.length;)F.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];q.has(e)||(q.add(e),e())}B.length=0}while(D.length);for(;I.length;)I.pop()();V=!1,q.clear(),P(t)}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}function Y(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}(`${e?"intro":"outro"}${n}`))}const G=new Set;let Z;function J(){Z={r:0,c:[],p:Z}}function Q(){Z.r||r(Z.c),Z=Z.p}function tt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function et(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),Z.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const nt={duration:0};function ot(n,o,s,c){let a=o(n,s),l=c?0:1,f=null,m=null,g=null;function y(){g&&L(n,g)}function b(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:i=0,duration:s=300,easing:c=e,tick:v=t,css:w}=a||nt,$={start:u()+i,b:o};o||($.group=Z,Z.r+=1),f||m?m=$:(w&&(y(),g=M(n,l,o,s,i,c,w)),o&&v(0,1),f=b($,s),j((()=>Y(n,o,"start"))),function(t){let e;0===p.size&&d(h),new Promise((n=>{p.add(e={c:t,f:n})}))}((t=>{if(m&&t>m.start&&(f=b(m,s),m=null,Y(n,f.b,"start"),w&&(y(),g=M(n,l,f.b,f.duration,0,c,a.css))),f)if(t>=f.end)v(l=f.b,1-l),Y(n,f.b,"end"),m||(f.b?y():--f.group.r||r(f.group.c)),f=null;else if(t>=f.start){const e=t-f.start;l=f.a+f.d*c(e/f.duration),v(l,1-l)}return!(!f&&!m)})))}return{run(t){i(a)?(U||(U=Promise.resolve(),U.then((()=>{U=null}))),U).then((()=>{a=a(),v(t)})):v(t)},end(){y(),f=m=null}}}const rt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function it(t,e,o,s){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,o),s||j((()=>{const e=a.map(n).filter(i);l?l.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(j)}function st(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){-1===t.$$.dirty[0]&&(D.push(t),V||(V=!0,H.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,i,s,c,a,l,u=[-1]){const d=N;P(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(p.root);let h=!1;if(p.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&ct(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(v)}else p.fragment&&p.fragment.c();n.intro&&tt(e.$$.fragment),it(e,n.target,n.anchor,n.customElement),W()}P(d)}let lt;"function"==typeof HTMLElement&&(lt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){st(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function ut(t,{delay:n=0,duration:o=400,easing:r=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*i}}var dt,pt,ht,ft,mt;!function(t){t.NoAudioConsent="NoAudioConsent",t.NoBrowserSupport="NoBrowserSupport",t.Stopped="Stopped",t.Starting="Starting",t.Started="Started"}(dt||(dt={})),function(t){t.Started="started",t.Stopped="stopped",t.SegmentEnd="segment_end",t.Transcript="transcript",t.Entity="entity",t.Intent="intent",t.TentativeTranscript="tentative_transcript",t.TentativeEntities="tentative_entities",t.TentativeIntent="tentative_intent"}(pt||(pt={})),function(t){t.Opened="WEBSOCKET_OPEN",t.Closed="WEBSOCKET_CLOSED",t.AudioProcessorReady="SOURCE_SAMPLE_RATE_SET_SUCCESS",t.VadSignalHigh="VadSignalHigh",t.VadSignalLow="VadSignalLow"}(ht||(ht={})),function(t){t.connect="connect",t.initAudioProcessor="initAudioProcessor",t.adjustAudioProcessor="adjustAudioProcessor",t.SET_SHARED_ARRAY_BUFFERS="SET_SHARED_ARRAY_BUFFERS",t.CLOSE="CLOSE",t.START_CONTEXT="START_CONTEXT",t.SWITCH_CONTEXT="SWITCH_CONTEXT",t.STOP_CONTEXT="STOP_CONTEXT",t.AUDIO="AUDIO",t.startStream="startStream",t.stopStream="stopStream",t.setContextOptions="setContextOptions"}(ft||(ft={})),function(t){t[t.Failed=0]="Failed",t[t.Disconnected=1]="Disconnected",t[t.Connected=2]="Connected",t[t.Active=3]="Active"}(mt||(mt={})),new Map([[mt.Failed,"Failed"],[mt.Disconnected,"Disconnected"],[mt.Connected,"Connected"],[mt.Active,"Active"]]);for(var gt=[],yt=0;yt<256;++yt)gt.push((yt+256).toString(16).substr(1));var bt,vt,wt,$t,xt,St,Ct,Et,Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},At={exports:{}};function kt(t){!function(t,e,n){const o=m(t);if(!o.getElementById(e)){const t=w("style");t.id=e,t.textContent=n,y(o,t)}}(t,"svelte-s2u2hd",".Icon.svelte-s2u2hd{position:absolute;width:var(--icon-size);height:var(--icon-size);top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none;transition:0.25s;opacity:var(--icon-opacity)}")}function _t(t){let e,n,o,r,i,s,c,a,l,u,d,p,h;return{c(){e=$("svg"),n=$("linearGradient"),o=$("animate"),r=$("animate"),i=$("stop"),s=$("stop"),c=$("stop"),a=$("stop"),l=$("stop"),u=x(">\n  "),d=$("g"),p=$("path"),h=$("rect"),T(o,"attributeName","y1"),T(o,"values","-200%; 0%;"),T(o,"dur","2s"),T(o,"repeatCount","indefinite"),T(r,"attributeName","y2"),T(r,"values","200%; 400%;"),T(r,"dur","2s"),T(r,"repeatCount","indefinite"),T(i,"offset","0%"),T(i,"stop-color","var(--gradient-stop1)"),T(s,"offset","25%"),T(s,"stop-color","var(--gradient-stop2)"),T(c,"offset","50%"),T(c,"stop-color","var(--gradient-stop1)"),T(a,"offset","75%"),T(a,"stop-color","var(--gradient-stop2)"),T(l,"offset","100%"),T(l,"stop-color","var(--gradient-stop1)"),T(n,"id","gradient"),T(n,"x1","50%"),T(n,"y1","-200%"),T(n,"x2","50%"),T(n,"y2","200%"),T(p,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(h,"x","20"),T(h,"y","1"),T(h,"width","16"),T(h,"height","37"),T(h,"rx","8"),T(d,"fill","url(#gradient)"),T(d,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,m){b(t,e,m),f(e,n),f(n,o),f(n,r),f(n,i),f(n,s),f(n,c),f(n,a),f(n,l),f(e,u),f(e,d),f(d,p),f(d,h)},d(t){t&&v(e)}}}function zt(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("rect"),T(o,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(r,"x","20"),T(r,"y","1"),T(r,"width","16"),T(r,"height","37"),T(r,"rx","8"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){b(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&v(e)}}}function Nt(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("path"),T(o,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(o,"fill-rule","nonzero"),T(r,"d","M37 13.081V31a8 8 0 11-16 0v-1.919l16-16zM26 1a8 8 0 018 8v1.319L18 26.318V9a8 8 0 018-8zM37.969 7.932l3.74-7.35 3.018 2.625zM39.654 10.608l7.531-3.359.695 3.94z"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){b(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&v(e)}}}function Ot(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("path"),T(o,"d","M36 14.828V30a8 8 0 01-15.961.79l15.96-15.962zM28 1a8 8 0 018 8v.172L20 25.173V9a8 8 0 018-8z"),T(r,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","nonzero"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){b(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&v(e)}}}function Mt(e){let n,o,r,i,s=e[0]===xt.MicActive&&_t(),c=e[0]===xt.Mic&&zt(),a=e[0]===xt.Error&&Nt(),l=e[0]===xt.Denied&&Ot();return{c(){s&&s.c(),n=S(),c&&c.c(),o=S(),a&&a.c(),r=S(),l&&l.c(),i=C()},m(t,e){s&&s.m(t,e),b(t,n,e),c&&c.m(t,e),b(t,o,e),a&&a.m(t,e),b(t,r,e),l&&l.m(t,e),b(t,i,e)},p(t,[e]){t[0]===xt.MicActive?s||(s=_t(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t[0]===xt.Mic?c||(c=zt(),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null),t[0]===xt.Error?a||(a=Nt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),t[0]===xt.Denied?l||(l=Ot(),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},i:t,o:t,d(t){s&&s.d(t),t&&v(n),c&&c.d(t),t&&v(o),a&&a.d(t),t&&v(r),l&&l.d(t),t&&v(i)}}}function Lt(t,e,n){let{icon:o=xt.Mic}=e;return t.$$set=t=>{"icon"in t&&n(0,o=t.icon)},[o]}
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
bt=At,vt=At.exports,function(t){var e=vt,n=bt&&bt.exports==e&&bt,o="object"==typeof Tt&&Tt;o.global!==o&&o.window!==o||(t=o);var r=function(t){this.message=t};(r.prototype=new Error).name="InvalidCharacterError";var i=function(t){throw new r(t)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,a={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,o,r,c=t.length%3,a="",l=-1,u=t.length-c;++l<u;)e=t.charCodeAt(l)<<16,n=t.charCodeAt(++l)<<8,o=t.charCodeAt(++l),a+=s.charAt((r=e+n+o)>>18&63)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+s.charAt(63&r);return 2==c?(e=t.charCodeAt(l)<<8,n=t.charCodeAt(++l),a+=s.charAt((r=e+n)>>10)+s.charAt(r>>4&63)+s.charAt(r<<2&63)+"="):1==c&&(r=t.charCodeAt(l),a+=s.charAt(r>>2)+s.charAt(r<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var n,o,r=0,a="",l=-1;++l<e;)o=s.indexOf(t.charAt(l)),n=r%4?64*n+o:o,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};if(e&&!e.nodeType)if(n)n.exports=a;else for(var l in a)a.hasOwnProperty(l)&&(e[l]=a[l]);else t.base64=a}(Tt),function(t){t.SpeechlyFirstConnect="SpeechlyFirstConnect"}(wt||(wt={})),function(t){t.speechlypoweron="speechlypoweron",t.holdstart="holdstart",t.holdend="holdend",t.speechstate="speechstate",t.audiosourcestate="audiosourcestate",t.speechsegment="speechsegment",t.speechhandled="speechhandled",t.showhint="showhint",t.transcriptdrawerhint="hint",t.speechlyintroready="speechlyintroready",t.speechlyintroclosed="speechlyintroclosed",t.startcontext="startcontext",t.stopcontext="stopcontext",t.requeststartmicrophone="requeststartmicrophone"}($t||($t={})),function(t){t.Mic="mic",t.MicActive="micactive",t.Error="error",t.Denied="denied"}(xt||(xt={})),function(t){t.Hold="hold",t.Click="click",t.Noninteractive="noninteractive"}(St||(St={})),function(t){t.None="none",t.Connecting="connecting",t.Busy="busy"}(Ct||(Ct={})),function(t){t.None="none",t.Whirl="whirl"}(Et||(Et={})),mt.Disconnected,mt.Connected,mt.Active,mt.Failed,dt.NoBrowserSupport,dt.NoAudioConsent;class Pt extends class{$destroy(){st(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),at(this,t,Lt,Mt,s,{icon:0},kt)}}const{window:Rt}=rt;function Dt(t){let e;return{c(){e=w("link"),T(e,"href","https://fonts.googleapis.com/css2?family=Saira+Condensed:wght@700&display=swap"),T(e,"rel","stylesheet")},m(t,n){b(t,e,n)},d(t){t&&v(e)}}}function Ft(t){let e;return{c(){e=w("link"),T(e,"href",t[3]),T(e,"rel","stylesheet")},m(t,n){b(t,e,n)},p(t,n){8&n&&T(e,"href",t[3])},d(t){t&&v(e)}}}function Bt(t){let e,n,o,r,i,s,c,a,l,u,d,p;const h=[qt,jt,Vt,Ht,It],m=[];function g(t,e){return t[4]===Yt||t[4]===dt.Starting?0:t[4]===Gt?1:t[4]===dt.NoAudioConsent?2:t[4]===dt.NoBrowserSupport?3:4}return s=g(t),c=m[s]=h[s](t),{c(){e=w("modalbg"),o=S(),r=w("modalcontent"),i=w("main"),c.c(),a=S(),l=w("footer"),l.innerHTML='Voice input is automatically transcribed by <a target="_blank" href="https://speechly.com/" rel="noopener noreferrer">Speechly</a> and can be used to improve the quality of service under <a target="_blank" href="https://www.speechly.com/privacy/terms-and-conditions" rel="noopener noreferrer">terms of use</a>.',T(r,"class",t[1]),k(r,"defaultTypography",t[7])},m(n,c){b(n,e,c),b(n,o,c),b(n,r,c),f(r,i),m[s].m(i,null),f(r,a),f(r,l),u=!0,d||(p=E(e,"click",t[9]),d=!0)},p(t,e){let n=s;s=g(t),s===n?m[s].p(t,e):(J(),et(m[n],1,1,(()=>{m[n]=null})),Q(),c=m[s],c?c.p(t,e):(c=m[s]=h[s](t),c.c()),tt(c,1),c.m(i,null)),(!u||2&e)&&T(r,"class",t[1]),130&e&&k(r,"defaultTypography",t[7])},i(o){u||(j((()=>{n||(n=ot(e,t[8],{duration:200},!0)),n.run(1)})),tt(c),u=!0)},o(o){n||(n=ot(e,t[8],{duration:200},!1)),n.run(0),et(c),u=!1},d(t){t&&v(e),t&&n&&n.end(),t&&v(o),t&&v(r),m[s].d(),d=!1,p()}}}function It(e){let n,o,r,i,s,c,a,l;function u(t,e){return t[2]?Xt:Ut}let d=u(e),p=d(e);return{c(){n=w("h2"),n.textContent="Failed to connect to Speechly",o=S(),r=w("p"),p.c(),i=S(),s=w("options"),c=w("button"),c.textContent="Ok, got it",T(c,"class","button button-primary")},m(t,u){b(t,n,u),b(t,o,u),b(t,r,u),p.m(r,null),b(t,i,u),b(t,s,u),f(s,c),a||(l=E(c,"click",e[9]),a=!0)},p(t,e){d===(d=u(t))&&p?p.p(t,e):(p.d(1),p=d(t),p&&(p.c(),p.m(r,null)))},i:t,o:t,d(t){t&&v(n),t&&v(o),t&&v(r),p.d(),t&&v(i),t&&v(s),a=!1,l()}}}function Ht(e){let n,o,r,i,s,c,a,l;return{c(){n=w("h2"),n.textContent="Unsupported browser",o=S(),r=w("p"),r.textContent="To use voice input, please visit this site using a supported browser.",i=S(),s=w("options"),c=w("button"),c.textContent="Ok, got it",T(c,"class","button button-primary")},m(t,u){b(t,n,u),b(t,o,u),b(t,r,u),b(t,i,u),b(t,s,u),f(s,c),a||(l=E(c,"click",e[9]),a=!0)},p:t,i:t,o:t,d(t){t&&v(n),t&&v(o),t&&v(r),t&&v(i),t&&v(s),a=!1,l()}}}function Vt(e){let n,o,i,s,c,a,l,u,d,p;return{c(){n=w("h2"),n.textContent="Microphone blocked",o=S(),i=w("p"),i.textContent=`To use voice input, ${window.location.hostname} needs access to your microphone. Check your\n          browser preferences to allow microphone access and reload the page.`,s=S(),c=w("options"),a=w("button"),a.textContent="Ok, got it",l=S(),u=w("button"),u.textContent="Reload page",T(a,"class","button button-secondary"),T(u,"class","button button-primary")},m(t,r){b(t,n,r),b(t,o,r),b(t,i,r),b(t,s,r),b(t,c,r),f(c,a),f(c,l),f(c,u),d||(p=[E(a,"click",e[9]),E(u,"click",e[19])],d=!0)},p:t,i:t,o:t,d(t){t&&v(n),t&&v(o),t&&v(i),t&&v(s),t&&v(c),d=!1,r(p)}}}function jt(e){let n,o,i,s,c,a,l,u,d,p;return{c(){n=w("h2"),n.textContent="HTTPS required",o=S(),i=w("p"),i.textContent="To use the voice interface, please visit this site using the secure\n          HTTPS protocol.",s=S(),c=w("options"),a=w("button"),a.textContent="Ok, got it",l=S(),u=w("button"),u.textContent="Try with HTTPS",T(a,"class","button button-secondary"),T(u,"class","button button-primary")},m(t,r){b(t,n,r),b(t,o,r),b(t,i,r),b(t,s,r),b(t,c,r),f(c,a),f(c,l),f(c,u),d||(p=[E(a,"click",e[9]),E(u,"click",e[13])],d=!0)},p:t,i:t,o:t,d(t){t&&v(n),t&&v(o),t&&v(i),t&&v(s),t&&v(c),d=!1,r(p)}}}function qt(t){let e,n,o,r,i,s,c,a,l,u,d,p,h,m,g,y,$,C,k,_=window.location.hostname+"";d=new Pt({});let z=t[5]&&Wt(t);return{c(){var t;e=w("h2"),e.innerHTML='<slot name="priming-title">Allow microphone</slot>',n=S(),o=w("p"),r=w("slot"),i=x("To use voice input, press "),s=w("strong"),s.textContent="Allow",c=x(" to give "),a=x(_),l=x(" access to your microphone.\n            Audio is only captured when "),u=w("span"),(t=d.$$.fragment)&&t.c(),p=x(" button is pressed."),h=S(),m=w("options"),g=w("button"),g.textContent="Not now",y=S(),z&&z.c(),A(u,"display","inline-block"),A(u,"position","relative"),A(u,"color","white"),A(u,"width","20px"),A(u,"height","10px"),A(u,"--icon-color","white"),A(u,"--icon-size","20px"),T(r,"name","priming-body"),T(g,"class","button button-secondary")},m(v,w){b(v,e,w),b(v,n,w),b(v,o,w),f(o,r),f(r,i),f(r,s),f(r,c),f(r,a),f(r,l),f(r,u),it(d,u,null),f(r,p),b(v,h,w),b(v,m,w),f(m,g),f(m,y),z&&z.m(m,null),$=!0,C||(k=E(g,"click",t[9]),C=!0)},p(t,e){t[5]?z?z.p(t,e):(z=Wt(t),z.c(),z.m(m,null)):z&&(z.d(1),z=null)},i(t){$||(tt(d.$$.fragment,t),$=!0)},o(t){et(d.$$.fragment,t),$=!1},d(t){t&&v(e),t&&v(n),t&&v(o),st(d),t&&v(h),t&&v(m),z&&z.d(),C=!1,k()}}}function Ut(e){let n;return{c(){n=x("Please check that your application has been successfully deployed.")},m(t,e){b(t,n,e)},p:t,d(t){t&&v(n)}}}function Xt(t){let e,n,o;return{c(){e=x("Please check that your application (App ID: "),n=x(t[2]),o=x(") has been successfully deployed.")},m(t,r){b(t,e,r),b(t,n,r),b(t,o,r)},p(t,e){4&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,t[2])},d(t){t&&v(e),t&&v(n),t&&v(o)}}}function Wt(t){let e,n,o,r,i;return{c(){e=w("button"),n=x("Allow"),T(e,"class","button button-primary"),e.disabled=o=t[4]===dt.Starting},m(o,s){b(o,e,s),f(e,n),r||(i=E(e,"click",t[10]),r=!0)},p(t,n){16&n&&o!==(o=t[4]===dt.Starting)&&(e.disabled=o)},d(t){t&&v(e),r=!1,i()}}}function Kt(e){let n,o,i,s,c,a,l,u=e[7]&&Dt(),d=void 0!==e[3]&&Ft(e),p=e[6]&&Bt(e);return{c(){u&&u.c(),n=C(),o=S(),d&&d.c(),i=S(),s=w("modal"),p&&p.c(),this.c=t,A(s,"--remsize",e[0])},m(t,r){u&&u.m(document.head,null),f(document.head,n),b(t,o,r),d&&d.m(t,r),b(t,i,r),b(t,s,r),p&&p.m(s,null),c=!0,a||(l=[E(Rt,"keydown",e[11]),E(Rt,"message",e[12])],a=!0)},p(t,[e]){t[7]?u||(u=Dt(),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),void 0!==t[3]?d?d.p(t,e):(d=Ft(t),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null),t[6]?p?(p.p(t,e),64&e&&tt(p,1)):(p=Bt(t),p.c(),tt(p,1),p.m(s,null)):p&&(J(),et(p,1,1,(()=>{p=null})),Q()),(!c||1&e)&&A(s,"--remsize",t[0])},i(t){c||(tt(p),c=!0)},o(t){et(p),c=!1},d(t){u&&u.d(t),v(n),t&&v(o),d&&d.d(t),t&&v(i),t&&v(s),p&&p.d(),a=!1,r(l)}}}const Yt="PagePriming",Gt="HttpsRequired";function Zt(t,e,n){let o,r;var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{a(o.next(t))}catch(t){i(t)}}function c(t){try{a(o.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((o=o.apply(t,e||[])).next())}))};let{hide:s="auto"}=e,{clientstate:c}=e,{microphonestate:a}=e,{remsize:l="1.0rem"}=e,{position:u="fixed"}=e,{appid:d}=e,{customcssurl:p}=e,{customtypography:h}=e,f=!0;const m=(()=>{const t=R();return(e,n)=>{t.dispatchEvent(new CustomEvent(e,{detail:n,composed:!0}))}})(),g=(y=ut,function(t,e){if(!t.hasOwnProperty("ownerDocument")){Object.defineProperty(t,"ownerDocument",{get:function(){return t.parentElement}});let e=t;for(;e.parentElement;)e=e.parentElement;t.parentElement.head=e}return y(t,e)});var y;let b=!1,v=Yt,w=null,$=!1;var x;x=()=>{n(18,b=!0),window.postMessage({type:$t.speechlyintroready},"*")},R().$$.on_mount.push(x);const S=(t={})=>{n(6,o=!1),m("speechlyintroclosed",t),window.postMessage(Object.assign({type:$t.speechlyintroclosed},t),"*")},C=t=>{var e,r;("auto"===s&&n(6,o=!0),w&&(window.clearTimeout(w),w=null),"https:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)||("localhost"===(r=window.location.hostname)||"[::1]"===r||null!==r.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)))?n(4,v=t):n(4,v=Gt)},E=t=>{switch(t){case dt.Starting:v===Yt?(n(4,v=t),w=window.setTimeout((()=>{w=null,"auto"===s&&n(6,o=!0)}),500)):n(6,o=!0);break;case dt.Started:f&&(f=!1,w?(window.clearTimeout(w),w=null,S()):S({firstrun:!0}));break;case dt.NoAudioConsent:case dt.NoBrowserSupport:C(t)}},T=t=>{if(t===mt.Failed)C(t)};return t.$$set=t=>{"hide"in t&&n(14,s=t.hide),"clientstate"in t&&n(15,c=t.clientstate),"microphonestate"in t&&n(16,a=t.microphonestate),"remsize"in t&&n(0,l=t.remsize),"position"in t&&n(1,u=t.position),"appid"in t&&n(2,d=t.appid),"customcssurl"in t&&n(3,p=t.customcssurl),"customtypography"in t&&n(17,h=t.customtypography)},t.$$.update=()=>{32768&t.$$.dirty&&c&&T(parseInt(c)),65536&t.$$.dirty&&a&&E(a),278528&t.$$.dirty&&n(6,o=b&&"false"===s),131072&t.$$.dirty&&n(7,r=void 0===h||"false"===h)},[l,u,d,p,v,$,o,r,g,S,()=>i(void 0,void 0,void 0,(function*(){m($t.requeststartmicrophone)})),t=>{b&&"Escape"===t.key&&(t.preventDefault(),S())},t=>{switch(t.data.type){case $t.speechlypoweron:"auto"===s&&n(6,o=!0),n(5,$=!0);break;case $t.speechstate:T(t.data.state);break;case $t.audiosourcestate:E(t.data.state);break;case $t.holdstart:switch(t.data.audioSourceState){case dt.NoAudioConsent:case dt.NoBrowserSupport:C(t.data.audioSourceState);break;default:if(t.data.state===mt.Failed)C(t.data.state)}}},()=>{const t=window.location.href.replace("http:","https:");window.location.replace(t)},s,c,a,h,b,()=>{window.location.reload()}]}class Jt extends lt{constructor(t){super(),this.shadowRoot.innerHTML="<style>modal{font-size:var(--remsize);pointer-events:none;height:100%}modalbg{position:fixed;top:0;bottom:0;left:0;right:0;overflow:hidden;z-index:2000;pointer-events:auto;background-color:rgba(0,0,0,0.75);backdrop-filter:blur(3px)}modalcontent{z-index:2001;pointer-events:auto;box-sizing:border-box;width:100%;min-height:100%;padding:1.5rem;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff}modalcontent.fixed{position:fixed;top:0;left:0;right:0;bottom:0;overflow-x:hidden;overflow-y:auto}modalcontent.absolute{position:absolute;top:0;left:0;right:0;height:100vh}.defaultTypography{font-family:-apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;color:#fff;font-size:1rem;line-height:1.5}.defaultTypography h2{font-family:'Saira Condensed', sans-serif;padding:0;margin:0;text-transform:uppercase;color:#fff;font-size:1.5rem;line-height:1.25}main{position:relative;box-sizing:border-box;width:100%;max-width:400px;margin:auto 0;padding:1.5rem 0}options{display:flex;margin-top:2rem;gap:8px}.button{background-color:transparent;box-sizing:border-box;border:1px solid transparent;border-radius:999px;cursor:pointer;font-family:inherit;font-size:1rem;font-weight:600;line-height:1.25;min-width:7rem;padding:0.5rem 1.5rem;transition:all 0.15s ease;white-space:nowrap;-webkit-tap-highlight-color:transparent}.button[disabled],.button:disabled{cursor:auto;opacity:0.5;pointer-events:none}.button-secondary{border-color:#fff;color:#fff}.button-secondary:hover{border-color:#ccc;color:#ccc}.button-primary{background-color:#fff;border-color:#fff;color:#000}.button-primary:hover{border-color:#ccc;background-color:#ccc;color:#000}footer{box-sizing:border-box;font-size:0.75rem;color:#999;margin:0}a,a:visited{color:#999;transition:all 0.15s ease;-webkit-tap-highlight-color:transparent}a:hover{color:#ccc}</style>",at(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},Zt,Kt,c,{hide:14,clientstate:15,microphonestate:16,remsize:0,position:1,appid:2,customcssurl:3,customtypography:17},null),t&&(t.target&&b(t.target,this,t.anchor),t.props&&(this.$set(t.props),W()))}static get observedAttributes(){return["hide","clientstate","microphonestate","remsize","position","appid","customcssurl","customtypography"]}get hide(){return this.$$.ctx[14]}set hide(t){this.$$set({hide:t}),W()}get clientstate(){return this.$$.ctx[15]}set clientstate(t){this.$$set({clientstate:t}),W()}get microphonestate(){return this.$$.ctx[16]}set microphonestate(t){this.$$set({microphonestate:t}),W()}get remsize(){return this.$$.ctx[0]}set remsize(t){this.$$set({remsize:t}),W()}get position(){return this.$$.ctx[1]}set position(t){this.$$set({position:t}),W()}get appid(){return this.$$.ctx[2]}set appid(t){this.$$set({appid:t}),W()}get customcssurl(){return this.$$.ctx[3]}set customcssurl(t){this.$$set({customcssurl:t}),W()}get customtypography(){return this.$$.ctx[17]}set customtypography(t){this.$$set({customtypography:t}),W()}}customElements.get("intro-popup")?console.warn("Skipping re-defining customElement intro-popup"):customElements.define("intro-popup",Jt)}));
//# sourceMappingURL=intro-popup.js.map
